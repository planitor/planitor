<!DOCTYPE html>
<html lang="is">
  <head>
    <meta charset="utf-8"/>
    <title>{% block title %}Planitor{% endblock %}</title>
    {% if not DEBUG -%}
    <link href="{{ url_for('build', path='/styles.css') }}" rel="stylesheet"/>
    {% endif -%}
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta property="og:title" content="{% block og_title %}Planitor{% endblock %}"/>
    <meta property="og:description" content="{% block og_description %}Uppl√Ωsingag√°tt fyrir skipulagsm√°l og mannvirkjager√∞ √° √çslandi{% endblock %}"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="{{ request.url }}"/>
    <link rel="icon" href="{{ url_for('static', path='/favicon-16.png') }}" sizes="16x16"/>
    <link rel="icon" href="{{ url_for('static', path='/favicon-32.png') }}" sizes="32x32"/>
    <link rel="icon" href="{{ url_for('static', path='/favicon-192.png') }}" sizes="192x192"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet"/>
    {% block og_image -%}
    <meta property="og:image" content="{{ url_for('static', path='/opengraph.png') }}"/>
    {% endblock -%}
    <script src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js"></script>
  </head>

  <script>
  document._user = {{ (user.to_dict() if user else None)|tojson }};
  </script>

  <body class="flex flex-col flex-wrap items-center min-h-screen bg-gray-100">
    <div class="bg-midnight w-full text-white">

      <nav id="navigation"></nav>

      {#
        <div class="sm:order-2 sm:flex-grow text-center sm:px-10">
          <a id="reveal-search" role="button" class="sm:hidden block">{{ magnifyingglass("w-5 h-5") }}</a>
          <form
            class="search hidden sm:flex bg-white bg-opacity-25 rounded-md items-center mr-3 px-3 sm:mx-3 md:mx-12"
            method="GET"
            action="{{ url_for('get_search') }}"
          >
            <div>{{ magnifyingglass("w-5 h-5") }}</div>
            <input
              value="{{ q or '' }}"
              name="q"
              size="1"
              class="bg-transparent flex-grow py-2 px-2 text-sm font-thin overflow-hidden"
              placeholder="Leit - t.d. 'Reitir ehf.', 'Brautarholt' e√∞a 'gistiheimili'"
            />
          </form>
        </div>

        <div class="flex-grow sm:order-1 sm:flex-grow-0 text-center">
          <a href="/s" class="font-black text-lg sm:text-xl">Planitor</a>
        </div>

        <div class="order-last text-right">
        {% if user %}
          <div class="flex flex-row sm:flex-col">
            <div>
              <a href="/" class="text-sm block truncate">
                <span class="sm:hidden inline-block pl-4" style="position: relative; top: 2px;">{{ person_fill("w-5 h-5") }}</span>
                <span class="hidden sm:inline">{{ user.email }}</span>
              </a>
            </div>
            <div class="order-first sm:order-last flex-grow">
              <a href="{{ url_for('logout') }}" id="logout-button" class="text-sm font-bold text-powder-light">√ötskr√°</a>
            </div>
          </div>
        {% else %}
          <div id="login-button" role="button">{{ person_fill("w-5 h-5") }}</div>
        {% endif %}
        </div>

      #}

      {#
      <nav id="navigation" class="flex items-center justify-between px-4 sm:px-6 py-2 sm:py-3 max-w-6xl mx-auto">
        <a href="/s" class="block logo" alt="Planitor">{% include "emblem.svg" %}</a>
        <form class="search rounded-md flex-grow flex items-center px-3 mx-3 sm:mx-6 md:mx-12" method="GET" action="{{ url_for('get_search') }}">
          <div class="sf-symbol">{% include "symbols/magnifyingglass.svg" %}</div>
          <input
            value="{{ q or '' }}"
            name="q"
            size="1"
            style="min-width: 120px; height: 2.9em;"
            class="bg-transparent flex-grow py-2 px-2 text-white text-sm font-thin overflow-hidden"
            placeholder="Leit - t.d. 'Reitir ehf.', 'Brautarholt' e√∞a 'gistiheimili'"
          />
        </form>
        {% if user %}
          <div class="user text-white">
            <span class="name font-thin" style="color: rgba(255, 255, 255, 0.6);">{{ user.full_name }}</span>
            <button id="logout-button" class="font-semibold text-white">√ötskr√°</button>
          </div>
        {% else %}
          <button id="login-button" class="btn btn-primary">Innskr√°</button>
        {% endif %}
      </nav>
      #}

    </div>

    <div class="flex-grow w-full sheet">
      <div class="max-w-6xl mx-auto px-4 sm:px-6">
        {% block body %}{% endblock body %}
      </div>
    </div>

    <footer class="w-full mt-4">
      <div class="mx-auto max-w-6xl px-4 py-4 sm:px-6 mb-4 text-sm sm:text-base">
        <hr class="mb-4">
        <div class="flex">
          <p class="my-1 text-gray-700">
            <a
              href="https://www.rsk.is/fyrirtaekjaskra/leit/kennitala/5105201060"
              target="_blank"
              class="font-bold underline"
            >
              Planitor ehf.
            </a> <br>
            M√Ωrargata 26, 101 Reykjav√≠k
          </p>
          <div class="flex-grow"></div>
          <p class="my-1 text-powder-darker text-right">
            <a href="https://planitor.substack.com/" target="_blank">
              Fr√©ttabr√©f üì®
            </a><br>
            <a href="mailto:hallo@planitor.io">
              hallo@planitor.io üëãüèª
            </a>
          </p>
        </div>
      </div>
    </footer>
    {% include "modal.html" %}
    {% if DEBUG %}
    {# Hot reload script #}
    {{ hotreload.script(url_for('hot-reload')) | safe }}
    <script>window.HMR_WEBSOCKET_URL = 'ws://localhost:8080';</script>
    <script type="module" src="http://localhost:8080/_dist_/index.js"></script>
    {% else %}
    <script src="{{ url_for('build', path='/bundle.js') }}"></script>
    {% endif %}
  </body>
</html>