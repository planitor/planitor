{% from "includes/breadcrumbs.html" import breadcrumbs, breadcrumb %}

{% extends "base.html" %} {% block body %}
<div class="px-6">
  <div class="my-8 mt-4 sm:mt-8">
    {% set council_slug = council.council_type.value.slug %}
    {% call breadcrumbs() %}
      {{ breadcrumb(url_for('get_index'), "Heim", mobile_collapse=True) }}
      {{ breadcrumb(url_for('get_municipality', muni_slug=municipality.slug), municipality.name) }}
      {{ breadcrumb(url_for('get_council', muni_slug=municipality.slug, council_slug=council_slug), council.name) }}
      {{ breadcrumb(None, case.serial) }}
    {% endcall %}
    <div>
      <div class="font-bold text-gray-700">{{ case.address }}</div>
      <a class="text-4xl font-thin block">{{ minutes[0].headline }}</a>
    </div>
  </div>
  <div class="minutes">
    <div class="flex mb-6 items-start">
      <div class="w-1/2">
        {% for minute in minutes %}
        <div class="block bg-white rounded overflow-hidden shadow-lg mb-6">
          <div class="px-4 py-4">
            <div class="flex justify-between items-center mb-2">
              <div class="name mr-4 text-xs uppercase tracking-wide text-gray-700" style="flex: 2 1 0;">
                <a
                  href="{{ url_for('get_minute',
                    muni_slug=minute.case.council.municipality.slug,
                    council_slug=minute.case.council.council_type.value.slug,
                    case_id=minute.case.serial,
                    minute_id=h.encode(minute.id)) }}"
                  class="text-midnight underline"
                  >{{ human_date(minute.meeting.start) }}</a
                >
                — Nr.
                <a
                  href="{{ url_for('get_meeting',
                    muni_slug=case.council.municipality.slug,
                    council_slug=case.council.council_type.value.slug,
                    meeting_id=h.encode(minute.meeting_id)) }}"
                  class="text-midnight underline"
                >
                  {{ minute.meeting.name }}</a
                >
              </div>
              <div
                class="pill pill-big pill-{{ minute.status.value.color if minute.status else 'none' }} font-bold"
              >
                {{ minute.status.value.label if minute.status else "Annað" }}
              </div>
            </div>
            <div class="max-w-2xl">
              <div class="mb-4">
                <h5 class="font-semibold text-xs uppercase tracking-wide text-gray-700">Fyrirspurn</h5>
                <p>{{ minute.inquiry }}</p>
              </div>
              <div>
                <h5 class="font-semibold text-xs uppercase tracking-wide text-gray-700">Svar</h5>
                <p>{{ minute.remarks }}</p>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="flex-1 ml-6">
        {% if case.get_coordinates() %} {% set lat, lon = case.get_coordinates() %}
        <div
          class="map h-64 w-full shadow-lg lazyload mb-6 rounded-md overflow-hidden"
          style="height: 24rem;"
          id="map-{{ case.id }}"
          data-lat="{{ lat }}"
          data-lon="{{ lon }}"
          data-address="{{ case.address }}"
        ></div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock body %}
